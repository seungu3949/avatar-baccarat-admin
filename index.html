<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>아바타 바카라 관리자 페이지</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter 폰트 -->
    <link rel="stylesheet" href="https://rsms.me/inter/inter.css">
    <!-- Poppins 폰트 -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- 커스텀 CSS -->
    <link rel="stylesheet" href="styles.css">
    <style>
        /* 다크모드 스타일 */
        body.dark {
            background-color: #1a1b1e;
            color: #ffffff;
        }

        /* 다크모드 컴포넌트 스타일 */
        body.dark .bg-gray-800 {
            background-color: #2a2b2e;
            border-color: #374151;
        }

        body.dark .bg-gray-700 {
            background-color: #374151;
            border-color: #4b5563;
        }

        body.dark .text-gray-300 {
            color: #d1d5db;
        }

        body.dark .text-gray-400 {
            color: #9ca3af;
        }

        body.dark .text-white {
            color: #ffffff;
        }

        body.dark .border-gray-700 {
            border-color: #374151;
        }

        /* 다크모드 버튼 스타일 */
        body.dark button.bg-gray-800 {
            background-color: #2a2b2e;
            border: 1px solid #374151;
            color: #d1d5db;
        }

        body.dark button.bg-gray-800:hover {
            background-color: #374151;
        }

        /* 다크모드 입력 필드 스타일 */
        body.dark input,
        body.dark select {
            background-color: #374151;
            border-color: #4b5563;
            color: #ffffff;
        }

        /* 다크모드 테이블 스타일 */
        body.dark table {
            background-color: #2a2b2e;
            border-color: #374151;
        }

        body.dark th {
            background-color: #374151;
            color: #d1d5db;
        }

        body.dark td {
            color: #ffffff;
        }

        /* 다크모드 모달 스타일 */
        body.dark .modal-content {
            background-color: #2a2b2e;
            border-color: #374151;
        }

        /* 다크모드 게임 결과 버튼 스타일 */
        body.dark .result-btn {
            background-color: #374151;
            border-color: #4b5563;
            color: #ffffff;
        }

        body.dark .result-btn:hover {
            background-color: #4b5563;
        }

        /* 다크모드 알림 스타일 */
        body.dark .notification {
            background-color: #2a2b2e;
            border-color: #374151;
            color: #ffffff;
        }

        /* 다크모드 헤더 스타일 */
        body.dark .header {
            background-color: #2a2b2e;
            border-bottom: 1px solid #374151;
        }

        /* 다크모드 게임 상태 표시 스타일 */
        body.dark #game-state {
            background-color: #2a2b2e;
            border-color: #374151;
        }

        /* 다크모드 로드맵 스타일 */
        body.dark .game-roadmap > div {
            border: 1px solid #374151;
        }

        /* 다크모드 모바일 메뉴 스타일 */
        body.dark #mobile-menu {
            background-color: #2a2b2e;
            border-left: 1px solid #374151;
        }

        /* 다크모드 차트 스타일 */
        body.dark canvas {
            background-color: #2a2b2e;
        }

        /* 다크모드 그라데이션 배경 */
        body.dark {
            background: linear-gradient(to bottom right, #1a1b1e, #2a2b2e);
        }

        /* 라이트 모드 스타일 */
        body:not(.dark) {
            background: #f3f4f6;
            color: #111827;
        }

        /* 라이트 모드 컴포넌트 스타일 */
        body:not(.dark) .bg-gray-800 {
            background-color: #ffffff;
            border-color: #e5e7eb;
            color: #111827;
        }

        body:not(.dark) .bg-gray-700 {
            background-color: #f9fafb;
            border-color: #e5e7eb;
        }

        body:not(.dark) .text-gray-300 {
            color: #374151;
        }

        body:not(.dark) .text-gray-400 {
            color: #4b5563;
        }

        body:not(.dark) .text-white {
            color: #111827;
        }

        body:not(.dark) .border-gray-700 {
            border-color: #e5e7eb;
        }

        /* 라이트 모드 버튼 스타일 */
        body:not(.dark) button.bg-gray-800 {
            background-color: #f3f4f6;
            border: 1px solid #e5e7eb;
            color: #374151;
        }

        body:not(.dark) button.bg-gray-800:hover {
            background-color: #e5e7eb;
        }

        /* 라이트 모드 입력 필드 스타일 */
        body:not(.dark) input,
        body:not(.dark) select {
            background-color: #ffffff;
            border-color: #d1d5db;
            color: #111827;
        }

        /* 라이트 모드 테이블 스타일 */
        body:not(.dark) table {
            background-color: #ffffff;
            border-color: #e5e7eb;
        }

        body:not(.dark) th {
            background-color: #f3f4f6;
            color: #374151;
        }

        body:not(.dark) td {
            color: #111827;
        }

        /* 라이트 모드 모달 스타일 */
        body:not(.dark) .modal-content {
            background-color: #ffffff;
            border-color: #e5e7eb;
        }

        /* 라이트 모드 게임 결과 버튼 스타일 */
        body:not(.dark) .result-btn {
            background-color: #f3f4f6;
            border-color: #e5e7eb;
            color: #111827;
        }

        body:not(.dark) .result-btn:hover {
            background-color: #e5e7eb;
        }

        /* 라이트 모드 알림 스타일 */
        body:not(.dark) .notification {
            background-color: #ffffff;
            border-color: #e5e7eb;
            color: #111827;
        }

        /* 라이트 모드 헤더 스타일 */
        body:not(.dark) .header {
            background-color: #ffffff;
            border-bottom: 1px solid #e5e7eb;
        }

        /* 라이트 모드 게임 상태 표시 스타일 */
        body:not(.dark) #game-state {
            background-color: #ffffff;
            border-color: #e5e7eb;
        }

        /* 라이트 모드 로드맵 스타일 */
        body:not(.dark) .game-roadmap > div {
            border: 1px solid #e5e7eb;
        }

        /* 라이트 모드 모바일 메뉴 스타일 */
        body:not(.dark) #mobile-menu {
            background-color: #ffffff;
            border-left: 1px solid #e5e7eb;
        }

        /* 모바일 대응 스타일 */
        @media (max-width: 768px) {
            /* 헤더 스타일 */
            .header {
                flex-direction: column;
                padding: 1rem;
            }
            
            .header-left {
                margin-bottom: 1rem;
            }
            
            .header-right {
                width: 100%;
                justify-content: space-between;
            }
            
            /* 메인 컨텐츠 스타일 */
            .main-content {
                padding: 1rem;
            }
            
            /* 게임 결과 제어 스타일 */
            .game-control {
                flex-direction: column;
            }
            
            .result-options {
                width: 100%;
                margin-bottom: 1rem;
            }
            
            .result-buttons {
                width: 100%;
            }
            
            /* 베팅 한도 설정 스타일 */
            .betting-limits {
                grid-template-columns: 1fr;
            }
            
            /* 게임 기록 스타일 */
            .game-history {
                overflow-x: auto;
            }
            
            .game-roadmap {
                flex-wrap: nowrap;
                overflow-x: auto;
                padding-bottom: 0.5rem;
            }
            
            /* 모달 스타일 */
            .modal-content {
                width: 95%;
                max-height: 90vh;
                overflow-y: auto;
            }
            
            /* 통계 차트 스타일 */
            .stats-charts {
                grid-template-columns: 1fr;
            }
            
            /* 사용자 관리 테이블 스타일 */
            .user-table {
                overflow-x: auto;
            }
            
            /* 백업 및 복구 스타일 */
            .backup-restore {
                grid-template-columns: 1fr;
            }
        }
        
        /* 터치 디바이스 최적화 */
        @media (hover: none) {
            button, 
            input[type="button"], 
            input[type="submit"] {
                min-height: 44px; /* 터치 타겟 크기 증가 */
            }
            
            .game-roadmap > div {
                min-width: 48px; /* 터치 타겟 크기 증가 */
                min-height: 48px;
            }
        }
        
        /* 다크 모드 최적화 */
        @media (prefers-color-scheme: dark) {
            .dark\:bg-gray-800 {
                background-color: #1a1a1a;
            }
            
            .dark\:text-white {
                color: #ffffff;
            }
            
            .dark\:border-gray-600 {
                border-color: #333333;
            }
        }
        
        /* 접근성 개선 */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation: none !important;
                transition: none !important;
            }
        }
        
        /* 고대비 모드 최적화 */
        @media (prefers-contrast: high) {
            .text-gray-300 {
                color: #ffffff;
            }
            
            .bg-gray-700 {
                background-color: #000000;
            }
            
            .border-gray-600 {
                border-color: #ffffff;
            }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-gray-900 to-gray-800 min-h-screen text-white">
    <!-- 로그인 모달 -->
    <div id="login-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg w-96">
            <h2 class="text-xl font-bold mb-4 text-gray-800 dark:text-white">관리자 로그인</h2>
            <form id="login-form">
                <div class="mb-4">
                    <label for="username" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">사용자 이름</label>
                    <input type="text" id="username" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white" required>
                </div>
                <div class="mb-4">
                    <label for="password" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">비밀번호</label>
                    <input type="password" id="password" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white" required>
                </div>
                <p id="login-error" class="text-red-500 text-xs mb-4 hidden"></p>
                <div class="flex justify-end space-x-2">
                    <button type="button" id="cancel-login" class="px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-600">취소</button>
                    <button type="submit" class="px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600">로그인</button>
                </div>
            </form>
        </div>
    </div>

    <div class="container mx-auto px-4 py-6">
        <!-- 헤더 섹션 -->
        <header class="mb-8">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="flex items-center mb-4 md:mb-0">
                    <div class="bg-gradient-to-r from-yellow-400 to-yellow-600 p-2 rounded-lg mr-3">
                        <i data-lucide="diamond" class="w-8 h-8 text-white"></i>
                    </div>
                    <h1 class="text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-yellow-600">아바타 바카라 관리자</h1>
                </div>
                
                <div class="flex items-center space-x-4">
                    <button id="mobile-menu-btn" class="md:hidden p-2 bg-gray-800 rounded-lg hover:bg-gray-700 transition">
                        <i data-lucide="menu" class="w-5 h-5 text-gray-300"></i>
                    </button>
                    <div class="bg-gray-800 p-2 rounded-lg flex items-center">
                        <i data-lucide="user" class="w-5 h-5 text-gray-400 mr-2"></i>
                        <span class="text-gray-300" id="user-display">관리자</span>
                    </div>
                    <button id="theme-toggle" class="p-2 bg-gray-800 rounded-lg hover:bg-gray-700 transition">
                        <i data-lucide="moon" class="w-5 h-5 text-gray-300"></i>
                    </button>
                    <div class="relative">
                        <button id="language-toggle" class="p-2 bg-gray-800 rounded-lg hover:bg-gray-700 transition flex items-center">
                            <span class="mr-1 text-gray-300">KO</span>
                            <i data-lucide="chevron-down" class="w-4 h-4 text-gray-300"></i>
                        </button>
                        <div id="language-dropdown" class="hidden absolute right-0 mt-2 bg-gray-800 rounded-lg shadow-xl z-10 w-24">
                            <ul class="py-1">
                                <li><a href="#" class="block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700" data-lang="ko">한국어</a></li>
                                <li><a href="#" class="block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700" data-lang="en">English</a></li>
                                <li><a href="#" class="block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700" data-lang="cn">中文</a></li>
                            </ul>
                        </div>
                    </div>
                    <button id="login-btn" class="p-2 bg-gray-800 rounded-lg hover:bg-gray-700 transition">
                        <i data-lucide="log-in" class="w-5 h-5 text-gray-300"></i>
                    </button>
                    <button id="logout-btn" class="p-2 bg-gray-800 rounded-lg hover:bg-gray-700 transition hidden">
                        <i data-lucide="log-out" class="w-5 h-5 text-gray-300"></i>
                    </button>
                </div>
            </div>
        </header>
        
        <!-- 모바일 메뉴 -->
        <div id="mobile-menu" class="md:hidden fixed top-0 left-0 w-full h-full bg-gray-800 transform transition-transform duration-300 ease-in-out translate-x-full z-50">
            <div class="p-4">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-xl font-bold text-gray-100">메뉴</h2>
                    <button id="close-mobile-menu" class="text-gray-300">
                        <i data-lucide="x" class="w-5 h-5"></i>
                    </button>
                </div>
                <nav class="space-y-2">
                    <button id="mobile-game-control-btn" class="w-full p-3 bg-gray-700 rounded-lg hover:bg-gray-600 transition text-left flex items-center">
                        <i data-lucide="gamepad-2" class="w-5 h-5 mr-2 text-gray-300"></i>
                        <span class="text-gray-300">게임 결과 제어</span>
                    </button>
                    <button id="mobile-betting-limits-btn" class="w-full p-3 bg-gray-700 rounded-lg hover:bg-gray-600 transition text-left flex items-center">
                        <i data-lucide="dollar-sign" class="w-5 h-5 mr-2 text-gray-300"></i>
                        <span class="text-gray-300">베팅 한도 설정</span>
                    </button>
                    <button id="mobile-game-history-btn" class="w-full p-3 bg-gray-700 rounded-lg hover:bg-gray-600 transition text-left flex items-center">
                        <i data-lucide="history" class="w-5 h-5 mr-2 text-gray-300"></i>
                        <span class="text-gray-300">게임 기록</span>
                    </button>
                    <button id="mobile-statistics-btn" class="w-full p-3 bg-gray-700 rounded-lg hover:bg-gray-600 transition text-left flex items-center">
                        <i data-lucide="bar-chart-2" class="w-5 h-5 mr-2 text-gray-300"></i>
                        <span class="text-gray-300">통계</span>
                    </button>
                    <button id="mobile-user-management-btn" class="w-full p-3 bg-gray-700 rounded-lg hover:bg-gray-600 transition text-left flex items-center">
                        <i data-lucide="users" class="w-5 h-5 mr-2 text-gray-300"></i>
                        <span class="text-gray-300">사용자 관리</span>
                    </button>
                    <button id="mobile-game-settings-btn" class="w-full p-3 bg-gray-700 rounded-lg hover:bg-gray-600 transition text-left flex items-center">
                        <i data-lucide="settings" class="w-5 h-5 mr-2 text-gray-300"></i>
                        <span class="text-gray-300">게임 설정</span>
                    </button>
                    <button id="mobile-backup-restore-btn" class="w-full p-3 bg-gray-700 rounded-lg hover:bg-gray-600 transition text-left flex items-center">
                        <i data-lucide="save" class="w-5 h-5 mr-2 text-gray-300"></i>
                        <span class="text-gray-300">백업 및 복구</span>
                    </button>
                </nav>
            </div>
        </div>
        
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
            <!-- 요약 정보 카드 -->
            <div class="bg-gray-800 rounded-xl shadow-lg p-5 border border-gray-700">
                <div class="flex items-center mb-3">
                    <i data-lucide="users" class="w-5 h-5 text-blue-500 mr-2"></i>
                    <h3 class="text-lg font-semibold text-gray-200">현재 플레이어</h3>
                </div>
                <div class="flex items-end justify-between">
                    <div class="text-3xl font-bold text-white" id="current-players">32</div>
                    <div class="text-sm text-green-400 flex items-center">
                        <i data-lucide="arrow-up" class="w-4 h-4 mr-1"></i> +5
                    </div>
                </div>
            </div>
            
            <div class="bg-gray-800 rounded-xl shadow-lg p-5 border border-gray-700">
                <div class="flex items-center mb-3">
                    <i data-lucide="banknote" class="w-5 h-5 text-green-500 mr-2"></i>
                    <h3 class="text-lg font-semibold text-gray-200">총 베팅액</h3>
                </div>
                <div class="flex items-end justify-between">
                    <div class="text-3xl font-bold text-white" id="total-bets">₩12,500,000</div>
                    <div class="text-sm text-green-400 flex items-center">
                        <i data-lucide="arrow-up" class="w-4 h-4 mr-1"></i> +2.5%
                    </div>
                </div>
            </div>
            
            <div class="bg-gray-800 rounded-xl shadow-lg p-5 border border-gray-700">
                <div class="flex items-center mb-3">
                    <i data-lucide="line-chart" class="w-5 h-5 text-yellow-500 mr-2"></i>
                    <h3 class="text-lg font-semibold text-gray-200">뱅커/플레이어 비율</h3>
                </div>
                <div class="flex items-end justify-between">
                    <div class="text-3xl font-bold text-white" id="betting-ratio">65% / 35%</div>
                    <div class="w-24 h-3 bg-gray-700 rounded-full overflow-hidden">
                        <div class="bg-gradient-to-r from-red-500 to-blue-500 h-full" style="width: 65%"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- 게임 결과 제어 섹션 -->
            <div class="bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-700">
                <h2 class="text-xl font-semibold mb-4 text-gray-100 flex items-center">
                    <i data-lucide="gamepad-2" class="w-5 h-5 mr-2 text-yellow-500"></i>
                    게임 결과 제어
                </h2>
                
                <!-- 게임 결과 버튼 그룹 -->
                <div class="mb-6">
                    <p class="text-sm text-gray-400 mb-2">결과 선택:</p>
                    <div class="flex flex-wrap gap-2">
                        <button id="banker-win" class="result-btn px-4 py-3 bg-gray-700 border border-gray-600 rounded-md hover:bg-red-900 hover:border-red-700 transition">
                            <div class="flex items-center">
                                <span class="w-3 h-3 bg-red-500 rounded-full mr-2"></span>
                                뱅커 승 (Banker Win)
                            </div>
                        </button>
                        <button id="player-win" class="result-btn px-4 py-3 bg-gray-700 border border-gray-600 rounded-md hover:bg-blue-900 hover:border-blue-700 transition">
                            <div class="flex items-center">
                                <span class="w-3 h-3 bg-blue-500 rounded-full mr-2"></span>
                                플레이어 승 (Player Win)
                            </div>
                        </button>
                        <button id="tie-win" class="result-btn px-4 py-3 bg-gray-700 border border-gray-600 rounded-md hover:bg-green-900 hover:border-green-700 transition">
                            <div class="flex items-center">
                                <span class="w-3 h-3 bg-green-500 rounded-full mr-2"></span>
                                타이 (Tie)
                            </div>
                        </button>
                    </div>
                </div>
                
                <!-- 페어 버튼 그룹 -->
                <div class="mb-6">
                    <p class="text-sm text-gray-400 mb-2">페어 토글:</p>
                    <div class="flex flex-wrap gap-2">
                        <button id="banker-pair" class="pair-btn px-4 py-3 bg-gray-700 border border-gray-600 rounded-md hover:bg-yellow-900 hover:border-yellow-700 transition">
                            <div class="flex items-center">
                                <i data-lucide="bookmark" class="w-4 h-4 text-yellow-500 mr-2"></i>
                                뱅커 페어 (Banker Pair)
                            </div>
                        </button>
                        <button id="player-pair" class="pair-btn px-4 py-3 bg-gray-700 border border-gray-600 rounded-md hover:bg-yellow-900 hover:border-yellow-700 transition">
                            <div class="flex items-center">
                                <i data-lucide="bookmark" class="w-4 h-4 text-yellow-500 mr-2"></i>
                                플레이어 페어 (Player Pair)
                            </div>
                        </button>
                    </div>
                </div>
                
                <!-- 선택된 결과 표시 영역 -->
                <div>
                    <p class="text-sm text-gray-400 mb-2">현재 선택됨:</p>
                    <div id="selected-result" class="p-4 bg-gray-700 border border-gray-600 rounded-md min-h-[50px] text-gray-200">
                        선택된 결과가 여기에 표시됩니다
                    </div>
                </div>
            </div>
            
            <!-- 현재 게임 상태 표시 섹션 -->
            <div class="bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-700">
                <h2 class="text-xl font-semibold mb-4 text-gray-100 flex items-center">
                    <i data-lucide="activity" class="w-5 h-5 mr-2 text-yellow-500"></i>
                    현재 게임 상태
                </h2>
                
                <!-- 게임 결과 시각적 표시 -->
                <div class="mb-6">
                    <div id="game-state" class="p-6 rounded-md bg-gray-700 border border-gray-600">
                        <div class="flex items-center justify-center space-x-8">
                            <!-- 뱅커 영역 -->
                            <div id="banker-state" class="text-center p-4 bg-gray-800 rounded-lg">
                                <div class="text-lg font-medium text-gray-300 mb-2">뱅커 (Banker)</div>
                                <div class="relative mb-2">
                                    <div class="card banker-card">
                                        <div class="card-inner">
                                            <div class="card-front"></div>
                                            <div class="card-back bg-red-800"></div>
                                        </div>
                                    </div>
                                </div>
                                <div id="banker-pair-indicator" class="hidden mt-2 text-sm text-yellow-500 font-medium flex items-center justify-center">
                                    <i data-lucide="bookmark" class="w-4 h-4 mr-1"></i>
                                    페어 (Pair)
                                </div>
                            </div>
                            
                            <!-- VS 표시 -->
                            <div>
                                <div class="text-gray-400 text-xl font-bold">VS</div>
                                <div class="mt-2 px-3 py-1 bg-gray-900 rounded-full text-xs text-gray-400" id="countdown">00:15</div>
                            </div>
                            
                            <!-- 플레이어 영역 -->
                            <div id="player-state" class="text-center p-4 bg-gray-800 rounded-lg">
                                <div class="text-lg font-medium text-gray-300 mb-2">플레이어 (Player)</div>
                                <div class="relative mb-2">
                                    <div class="card player-card">
                                        <div class="card-inner">
                                            <div class="card-front"></div>
                                            <div class="card-back bg-blue-800"></div>
                                        </div>
                                    </div>
                                </div>
                                <div id="player-pair-indicator" class="hidden mt-2 text-sm text-yellow-500 font-medium flex items-center justify-center">
                                    <i data-lucide="bookmark" class="w-4 h-4 mr-1"></i>
                                    페어 (Pair)
                                </div>
                            </div>
                        </div>
                        
                        <!-- 승자 표시 -->
                        <div id="winner-display" class="mt-6 p-3 text-center font-bold text-lg rounded-md bg-gray-800">
                            결과를 선택해 주세요
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 베팅 한도 설정 섹션 -->
            <div class="bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-700">
                <h2 class="text-xl font-semibold mb-4 text-gray-100 flex items-center">
                    <i data-lucide="settings" class="w-5 h-5 mr-2 text-yellow-500"></i>
                    베팅 한도 설정
                </h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                    <!-- 최소 베팅 입력 -->
                    <div>
                        <label for="min-bet" class="block text-sm font-medium text-gray-300 mb-1">최소 베팅</label>
                        <div class="relative">
                            <span class="absolute inset-y-0 left-0 pl-3 flex items-center text-gray-400">₩</span>
                            <input type="number" id="min-bet" class="w-full pl-8 p-3 bg-gray-700 border border-gray-600 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500" placeholder="예: 1000" min="0">
                        </div>
                        <p id="min-bet-error" class="hidden text-red-500 text-xs mt-1">유효한 숫자를 입력해 주세요</p>
                    </div>
                    
                    <!-- 최대 베팅 입력 -->
                    <div>
                        <label for="max-bet" class="block text-sm font-medium text-gray-300 mb-1">최대 베팅</label>
                        <div class="relative">
                            <span class="absolute inset-y-0 left-0 pl-3 flex items-center text-gray-400">₩</span>
                            <input type="number" id="max-bet" class="w-full pl-8 p-3 bg-gray-700 border border-gray-600 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500" placeholder="예: 1000000" min="0">
                        </div>
                        <p id="max-bet-error" class="hidden text-red-500 text-xs mt-1">유효한 숫자를 입력해 주세요</p>
                    </div>
                </div>
                
                <!-- 베팅 한도 그룹 (타입별) -->
                <div class="mb-4">
                    <p class="text-sm text-gray-400 mb-2">타입별 배당률:</p>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                        <div class="p-3 bg-gray-700 border border-gray-600 rounded-md">
                            <div class="text-xs text-gray-400 mb-1">뱅커 (Banker)</div>
                            <input type="number" step="0.01" class="w-full p-2 bg-gray-800 border border-gray-600 text-white rounded-md" value="0.95">
                        </div>
                        <div class="p-3 bg-gray-700 border border-gray-600 rounded-md">
                            <div class="text-xs text-gray-400 mb-1">플레이어 (Player)</div>
                            <input type="number" step="0.01" class="w-full p-2 bg-gray-800 border border-gray-600 text-white rounded-md" value="1.00">
                        </div>
                        <div class="p-3 bg-gray-700 border border-gray-600 rounded-md">
                            <div class="text-xs text-gray-400 mb-1">타이 (Tie)</div>
                            <input type="number" step="0.01" class="w-full p-2 bg-gray-800 border border-gray-600 text-white rounded-md" value="8.00">
                        </div>
                        <div class="p-3 bg-gray-700 border border-gray-600 rounded-md">
                            <div class="text-xs text-gray-400 mb-1">페어 (Pair)</div>
                            <input type="number" step="0.01" class="w-full p-2 bg-gray-800 border border-gray-600 text-white rounded-md" value="11.00">
                        </div>
                    </div>
                </div>
                
                <!-- 한도 업데이트 버튼 -->
                <button id="update-limits" class="w-full px-4 py-3 bg-gradient-to-r from-yellow-500 to-yellow-600 text-white rounded-md hover:from-yellow-600 hover:to-yellow-700 transition flex items-center justify-center">
                    <i data-lucide="check-circle" class="w-4 h-4 mr-2"></i>
                    한도 업데이트
                </button>
                
                <!-- 확인 메시지 영역 -->
                <div id="limits-confirmation" class="hidden mt-4 p-3 bg-green-900 border border-green-700 text-green-300 rounded-md">
                </div>
            </div>
            
            <!-- 게임 기록 섹션 -->
            <div class="bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-700">
                <h2 class="text-xl font-semibold mb-4 text-gray-100 flex items-center">
                    <i data-lucide="history" class="w-5 h-5 mr-2 text-yellow-500"></i>
                    게임 기록
                </h2>
                
                <div class="mb-4">
                    <div class="flex space-x-1 mb-2">
                        <!-- 로드맵 -->
                        <div class="flex-1 grid grid-cols-6 gap-1 p-2 bg-gray-700 rounded-md">
                            <div class="w-full aspect-square bg-red-900 rounded-sm flex items-center justify-center"><span class="text-xs">B</span></div>
                            <div class="w-full aspect-square bg-blue-900 rounded-sm flex items-center justify-center"><span class="text-xs">P</span></div>
                            <div class="w-full aspect-square bg-red-900 rounded-sm flex items-center justify-center"><span class="text-xs">B</span></div>
                            <div class="w-full aspect-square bg-red-900 rounded-sm flex items-center justify-center"><span class="text-xs">B</span></div>
                            <div class="w-full aspect-square bg-green-900 rounded-sm flex items-center justify-center"><span class="text-xs">T</span></div>
                            <div class="w-full aspect-square bg-blue-900 rounded-sm flex items-center justify-center"><span class="text-xs">P</span></div>
                            <div class="w-full aspect-square bg-blue-900 rounded-sm flex items-center justify-center"><span class="text-xs">P</span></div>
                            <div class="w-full aspect-square bg-blue-900 rounded-sm flex items-center justify-center"><span class="text-xs">P</span></div>
                            <div class="w-full aspect-square bg-red-900 rounded-sm flex items-center justify-center"><span class="text-xs">B</span></div>
                            <div class="w-full aspect-square bg-blue-900 rounded-sm flex items-center justify-center"><span class="text-xs">P</span></div>
                            <div class="w-full aspect-square bg-red-900 rounded-sm flex items-center justify-center"><span class="text-xs">B</span></div>
                            <div class="w-full aspect-square bg-red-900 rounded-sm flex items-center justify-center"><span class="text-xs">B</span></div>
                        </div>
                    </div>
                    
                    <div class="flex justify-between text-xs text-gray-400 mb-1">
                        <span>최근 게임 결과</span>
                        <span>뱅커: 6회 / 플레이어: 5회 / 타이: 1회</span>
                    </div>
                </div>
                
                <div class="overflow-hidden rounded-md border border-gray-700">
                    <table class="min-w-full divide-y divide-gray-700">
                        <thead class="bg-gray-700">
                            <tr>
                                <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">게임 ID</th>
                                <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">결과</th>
                                <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">시간</th>
                                <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">총 베팅</th>
                            </tr>
                        </thead>
                        <tbody class="bg-gray-800 divide-y divide-gray-700">
                            <tr>
                                <td class="px-4 py-3 text-sm text-gray-300">#12345</td>
                                <td class="px-4 py-3">
                                    <span class="px-2 py-1 text-xs rounded-full bg-blue-900 text-blue-200">플레이어</span>
                                </td>
                                <td class="px-4 py-3 text-sm text-gray-400">14:25:12</td>
                                <td class="px-4 py-3 text-sm text-gray-300">₩1,250,000</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-3 text-sm text-gray-300">#12344</td>
                                <td class="px-4 py-3">
                                    <span class="px-2 py-1 text-xs rounded-full bg-red-900 text-red-200">뱅커</span>
                                </td>
                                <td class="px-4 py-3 text-sm text-gray-400">14:23:05</td>
                                <td class="px-4 py-3 text-sm text-gray-300">₩980,000</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-3 text-sm text-gray-300">#12343</td>
                                <td class="px-4 py-3">
                                    <span class="px-2 py-1 text-xs rounded-full bg-red-900 text-red-200">뱅커</span>
                                    <span class="px-2 py-1 text-xs rounded-full bg-yellow-900 text-yellow-200 ml-1">페어</span>
                                </td>
                                <td class="px-4 py-3 text-sm text-gray-400">14:21:32</td>
                                <td class="px-4 py-3 text-sm text-gray-300">₩1,420,000</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-3 text-sm text-gray-300">#12342</td>
                                <td class="px-4 py-3">
                                    <span class="px-2 py-1 text-xs rounded-full bg-green-900 text-green-200">타이</span>
                                </td>
                                <td class="px-4 py-3 text-sm text-gray-400">14:19:47</td>
                                <td class="px-4 py-3 text-sm text-gray-300">₩750,000</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Chart.js 라이브러리 추가 -->
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

        <!-- 통계 섹션 추가 -->
        <div class="bg-gray-800 p-6 rounded-xl shadow-lg mb-6">
            <h2 class="text-xl font-bold text-gray-100 mb-4">게임 통계</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="bg-gray-700 p-4 rounded-lg">
                    <h3 class="text-lg font-semibold text-gray-300 mb-2">승률 분포</h3>
                    <canvas id="winRateChart"></canvas>
                </div>
                <div class="bg-gray-700 p-4 rounded-lg">
                    <h3 class="text-lg font-semibold text-gray-300 mb-2">베팅 금액 추이</h3>
                    <canvas id="bettingTrendChart"></canvas>
                </div>
                <div class="bg-gray-700 p-4 rounded-lg">
                    <h3 class="text-lg font-semibold text-gray-300 mb-2">시간대별 게임 수</h3>
                    <canvas id="timeDistributionChart"></canvas>
                </div>
                <div class="bg-gray-700 p-4 rounded-lg">
                    <h3 class="text-lg font-semibold text-gray-300 mb-2">페어 발생률</h3>
                    <canvas id="pairRateChart"></canvas>
                </div>
            </div>
        </div>
    </div>

    <!-- 푸터 -->
    <footer class="mt-8 py-4 border-t border-gray-700">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="text-gray-400 text-sm mb-2 md:mb-0">
                    
                </div>
                <div class="flex items-center space-x-4">
                    <button class="text-gray-400 hover:text-gray-300 transition">
                        <i data-lucide="help-circle" class="w-5 h-5"></i>
                    </button>
                    <button class="text-gray-400 hover:text-gray-300 transition">
                        <i data-lucide="settings" class="w-5 h-5"></i>
                    </button>
                    <button class="text-gray-400 hover:text-gray-300 transition">
                        <i data-lucide="log-out" class="w-5 h-5"></i>
                    </button>
                </div>
            </div>
        </div>
    </footer>

    <!-- 모달 - 결과 확인 -->
    <div id="result-confirm-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-700 max-w-md w-full">
            <h3 class="text-xl font-semibold mb-4 text-white">결과 확인</h3>
            <p class="text-gray-300 mb-6">다음 결과를 스트리밍에 적용하시겠습니까?</p>
            <div id="modal-result" class="p-4 bg-gray-700 rounded-md mb-6 text-center font-bold text-gray-200">
                뱅커 승 (Banker Win)
            </div>
            <div class="flex justify-end space-x-3">
                <button id="cancel-result" class="px-4 py-2 bg-gray-700 text-gray-300 rounded-md hover:bg-gray-600 transition">
                    취소
                </button>
                <button id="confirm-result" class="px-4 py-2 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-md hover:from-green-600 hover:to-green-700 transition">
                    확인
                </button>
            </div>
        </div>
    </div>

    <!-- 알림 컨테이너 추가 -->
    <div id="notification-container" class="fixed top-4 right-4 z-50"></div>

    <!-- 사용자 관리 모달 추가 -->
    <div id="user-management-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg w-3/4 max-w-4xl">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl font-bold text-gray-800 dark:text-white">사용자 관리</h2>
                <button id="close-user-management" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
                    <i data-lucide="x" class="w-5 h-5"></i>
                </button>
            </div>
            
            <div class="mb-4">
                <button id="add-user-btn" class="px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600">
                    <i data-lucide="user-plus" class="w-4 h-4 inline-block mr-1"></i> 사용자 추가
                </button>
            </div>
            
            <div class="overflow-x-auto">
                <table class="min-w-full bg-gray-700 rounded-lg overflow-hidden">
                    <thead class="bg-gray-600">
                        <tr>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">사용자 이름</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">이메일</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">권한</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">상태</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">작업</th>
                        </tr>
                    </thead>
                    <tbody id="user-table-body" class="divide-y divide-gray-600">
                        <!-- 사용자 목록이 여기에 동적으로 추가됩니다 -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- 사용자 추가/수정 모달 -->
    <div id="user-form-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg w-96">
            <div class="flex justify-between items-center mb-4">
                <h2 id="user-form-title" class="text-xl font-bold text-gray-800 dark:text-white">사용자 추가</h2>
                <button id="close-user-form" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
                    <i data-lucide="x" class="w-5 h-5"></i>
                </button>
            </div>
            
            <form id="user-form">
                <input type="hidden" id="user-id">
                <div class="mb-4">
                    <label for="user-username" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">사용자 이름</label>
                    <input type="text" id="user-username" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white" required>
                </div>
                <div class="mb-4">
                    <label for="user-email" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">이메일</label>
                    <input type="email" id="user-email" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white" required>
                </div>
                <div class="mb-4">
                    <label for="user-password" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">비밀번호</label>
                    <input type="password" id="user-password" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                    <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">수정 시 비워두면 변경되지 않습니다.</p>
                </div>
                <div class="mb-4">
                    <label for="user-role" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">권한</label>
                    <select id="user-role" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white" required>
                        <option value="admin">관리자</option>
                        <option value="operator">운영자</option>
                        <option value="viewer">조회자</option>
                    </select>
                </div>
                <div class="mb-4">
                    <label for="user-status" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">상태</label>
                    <select id="user-status" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white" required>
                        <option value="active">활성</option>
                        <option value="inactive">비활성</option>
                    </select>
                </div>
                <div class="flex justify-end space-x-2">
                    <button type="button" id="cancel-user-form" class="px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-600">취소</button>
                    <button type="submit" class="px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600">저장</button>
                </div>
            </form>
        </div>
    </div>

    <!-- 백업 및 복구 모달 추가 -->
    <div id="backup-restore-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg w-3/4 max-w-4xl">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl font-bold text-gray-800 dark:text-white">백업 및 복구</h2>
                <button id="close-backup-restore" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
                    <i data-lucide="x" class="w-5 h-5"></i>
                </button>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- 백업 섹션 -->
                <div class="bg-gray-700 p-4 rounded-lg">
                    <h3 class="text-lg font-semibold text-gray-300 mb-4">데이터 백업</h3>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-1">백업 설명</label>
                            <input type="text" id="backup-description" class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md text-white" placeholder="백업에 대한 설명을 입력하세요">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-1">백업 범위</label>
                            <div class="space-y-2">
                                <label class="flex items-center">
                                    <input type="checkbox" id="backup-game-results" class="mr-2" checked>
                                    <span class="text-gray-300">게임 결과</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" id="backup-betting-limits" class="mr-2" checked>
                                    <span class="text-gray-300">베팅 한도</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" id="backup-game-settings" class="mr-2" checked>
                                    <span class="text-gray-300">게임 설정</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" id="backup-user-data" class="mr-2">
                                    <span class="text-gray-300">사용자 데이터</span>
                                </label>
                            </div>
                        </div>
                        <button id="create-backup-btn" class="w-full px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600">
                            백업 생성
                        </button>
                    </div>
                </div>
                
                <!-- 복구 섹션 -->
                <div class="bg-gray-700 p-4 rounded-lg">
                    <h3 class="text-lg font-semibold text-gray-300 mb-4">데이터 복구</h3>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-1">복구 설명</label>
                            <input type="text" id="restore-description" class="w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded-md text-white" placeholder="복구에 대한 설명을 입력하세요">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-1">복구 범위</label>
                            <div class="space-y-2">
                                <label class="flex items-center">
                                    <input type="checkbox" id="restore-game-results" class="mr-2">
                                    <span class="text-gray-300">게임 결과</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" id="restore-betting-limits" class="mr-2">
                                    <span class="text-gray-300">베팅 한도</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" id="restore-game-settings" class="mr-2">
                                    <span class="text-gray-300">게임 설정</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" id="restore-user-data" class="mr-2">
                                    <span class="text-gray-300">사용자 데이터</span>
                                </label>
                            </div>
                        </div>
                        <button id="restore-backup-btn" class="w-full px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600">
                            복구 실행
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="script.js"></script>
    <script>
        // 전역 변수 및 상수 정의
        const SESSION_TIMEOUT = 30 * 60 * 1000; // 30분
        let sessionTimer = null;
        let socket = null;
        let reconnectAttempts = 0;
        const MAX_RECONNECT_ATTEMPTS = 5;

        // DOM 요소 초기화 함수
        function initializeDOMElements() {
            return {
                loginModal: document.getElementById('login-modal'),
                loginBtn: document.getElementById('login-btn'),
                cancelLoginBtn: document.getElementById('cancel-login'),
                loginForm: document.getElementById('login-form'),
                userDisplay: document.getElementById('user-display'),
                loginError: document.getElementById('login-error'),
                logoutBtn: document.getElementById('logout-btn'),
                themeToggle: document.getElementById('theme-toggle')
            };
        }

        // 테마 관련 함수
        function updateThemeIcon(elements, isDarkMode) {
            const { themeToggle } = elements;
            if (themeToggle) {
                themeToggle.innerHTML = isDarkMode ? 
                    '<i data-lucide="sun" class="w-5 h-5 text-gray-300"></i>' : 
                    '<i data-lucide="moon" class="w-5 h-5 text-gray-300"></i>';
                lucide.createIcons();
            }
        }

        function initThemeToggle(elements) {
            const isDarkMode = localStorage.getItem('darkMode') === 'true';
            document.body.classList.toggle('dark', isDarkMode);
            updateThemeIcon(elements, isDarkMode);
        }

        // 세션 관리 함수
        function startSessionTimer() {
            if (sessionTimer) clearTimeout(sessionTimer);
            sessionTimer = setTimeout(handleSessionTimeout, SESSION_TIMEOUT);
        }

        function handleSessionTimeout() {
            showNotification('세션이 만료되었습니다. 다시 로그인해주세요.', 'error');
            logout();
        }

        function resetSessionTimer() {
            startSessionTimer();
        }

        // 로그인 상태 관리
        function checkLoginStatus(elements) {
            const { userDisplay, loginBtn, logoutBtn } = elements;
            const token = localStorage.getItem('token');
            const username = localStorage.getItem('username');
            
            if (token && username) {
                if (userDisplay) userDisplay.textContent = username;
                if (loginBtn) loginBtn.classList.add('hidden');
                if (logoutBtn) logoutBtn.classList.remove('hidden');
                startSessionTimer();
                return true;
            } else {
                if (userDisplay) userDisplay.textContent = '';
                if (loginBtn) loginBtn.classList.remove('hidden');
                if (logoutBtn) logoutBtn.classList.add('hidden');
                return false;
            }
        }

        function logout() {
            localStorage.removeItem('token');
            localStorage.removeItem('username');
            if (socket) {
                socket.close();
                socket = null;
            }
            if (sessionTimer) {
                clearTimeout(sessionTimer);
                sessionTimer = null;
            }
            const elements = initializeDOMElements();
            checkLoginStatus(elements);
        }

        // 이벤트 리스너 설정
        function setupEventListeners(elements) {
            const {
                loginModal,
                loginBtn,
                cancelLoginBtn,
                loginForm,
                loginError,
                logoutBtn,
                themeToggle
            } = elements;

            // 테마 토글 이벤트
            if (themeToggle) {
                themeToggle.addEventListener('click', () => {
                    const isDarkMode = document.body.classList.toggle('dark');
                    localStorage.setItem('darkMode', isDarkMode);
                    updateThemeIcon(elements, isDarkMode);
                });
            }

            // 로그아웃 버튼 이벤트
            if (logoutBtn) {
                logoutBtn.addEventListener('click', logout);
            }

            // 로그인 버튼 이벤트
            if (loginBtn) {
                loginBtn.addEventListener('click', () => {
                    loginModal.classList.remove('hidden');
                    loginModal.classList.add('flex');
                    loginError.textContent = '';
                });
            }

            // 취소 버튼 이벤트
            if (cancelLoginBtn) {
                cancelLoginBtn.addEventListener('click', () => {
                    loginModal.classList.add('hidden');
                    loginModal.classList.remove('flex');
                    loginForm.reset();
                    loginError.textContent = '';
                });
            }

            // 세션 활동 감지
            document.addEventListener('mousemove', resetSessionTimer);
            document.addEventListener('keydown', resetSessionTimer);
            document.addEventListener('click', resetSessionTimer);
        }

        // 초기화
        document.addEventListener('DOMContentLoaded', () => {
            // DOM 요소 초기화
            const elements = initializeDOMElements();
            
            // Lucide 아이콘 초기화
            lucide.createIcons();
            
            // 테마 초기화
            initThemeToggle(elements);
            
            // 로그인 상태 확인
            const isLoggedIn = checkLoginStatus(elements);
            
            // 이벤트 리스너 설정
            setupEventListeners(elements);
            
            // 로그인 되어있으면 데이터 로드
            if (isLoggedIn) {
                loadGameData();
                connectWebSocket();
            }
        });

        // ... 나머지 코드는 그대로 유지 ...
    </script>
</body>
</html> 